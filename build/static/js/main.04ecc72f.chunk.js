(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{22:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(2),o=t.n(c),a=t(16),u=t.n(a),i=(t(22),t(6)),s=t(3),d=t(5),l=function(e){var n=e.person,t=e.deletePerson;return Object(r.jsxs)("div",{children:[n.name," ",n.number,Object(r.jsx)("button",{onClick:function(){window.confirm("Really delete ".concat(n.name,"?"))&&t(n.id)},children:"delete"})]})},f=function(e){var n=e.nameFilter,t=e.persons,c=e.deletePerson;return Object(r.jsx)(r.Fragment,{children:t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return Object(r.jsx)(l,{person:e,deletePerson:c},e.id)}))})},j=function(e){var n=e.msg;return null===n?null:Object(r.jsx)("div",{className:n.type,children:n.text})},b=function(e){var n=e.newPerson,t=e.handlePersonChange,c=e.addPerson;return Object(r.jsxs)("form",{onSubmit:c,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{name:"name",value:n.name,onChange:t})]}),Object(r.jsxs)("div",{children:["number: ",Object(r.jsx)("input",{name:"number",value:n.number,onChange:t})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},h=t(4),m=t.n(h),p="http://localhost:3001/api",O={getAllPersons:function(){return m.a.get("".concat(p,"/persons")).then((function(e){return e.data}))},addPerson:function(e){return m.a.post("".concat(p,"/persons"),e).then((function(e){return e.data}))},updatePerson:function(e){return m.a.put("".concat(p,"/persons/").concat(e.id),e).then((function(e){return e.data}))},deletePerson:function(e){return m.a.delete("".concat(p,"/persons/").concat(e)).then((function(e){return e.data}))}},x=function(){var e=Object(c.useState)([]),n=Object(d.a)(e,2),t=n[0],o=n[1],a=Object(c.useState)(null),u=Object(d.a)(a,2),l=u[0],h=u[1],m=3e3,p=Object(c.useState)({name:"",number:""}),x=Object(d.a)(p,2),v=x[0],g=x[1],P=Object(c.useState)(""),w=Object(d.a)(P,2),y=w[0],C=w[1];Object(c.useEffect)((function(){O.getAllPersons().then((function(e){return o(e)}))}),[]);var F=function(e,n){"error"===e&&console.error(n),h({type:e,text:n}),setTimeout((function(){return h(null)}),m)};return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(j,{msg:l}),Object(r.jsxs)("div",{children:["Filter by name: ",Object(r.jsx)("input",{value:y,onChange:function(e){C(e.target.value)}})]}),Object(r.jsx)("h2",{children:"Add a new"}),Object(r.jsx)(b,{newPerson:v,handlePersonChange:function(e){g(Object(s.a)(Object(s.a)({},v),{},Object(i.a)({},e.target.name,e.target.value)))},addPerson:function(e){if(e.preventDefault(),t.map((function(e){return e.name})).includes(v.name)&&window.confirm("".concat(v.name," is already added to the phonebook, replace old number with new one?"))){var n=t.find((function(e){return e.name===v.name}));O.updatePerson(Object(s.a)(Object(s.a)({},n),v)).then((function(e){o(t.map((function(t){return t.id===n.id?e:t}))),h({type:"success",text:"Updated ".concat(e.name)}),setTimeout((function(){return h(null)}),m)})).catch((function(e){return F("error",e.response.data.error)}))}else O.addPerson(v).then((function(e){o(t.concat(e)),h({type:"success",text:"Added ".concat(e.name)}),setTimeout((function(){return h(null)}),m)})).catch((function(e){return F("error",e.response.data.error)}))}}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(f,{deletePerson:function(e){O.deletePerson(e).then((function(n){return h({type:"success",text:"Deleted ".concat(t.find((function(n){return n.id===e})).name)})})).catch((function(n){return h({type:"error",text:"Information of '".concat(t.find((function(n){return n.id===e})).name,"' might have already been removed from the server")})})).finally((function(n){o(t.filter((function(n){return n.id!==e}))),setTimeout((function(){return h(null)}),m)}))},nameFilter:y,persons:t})]})},v=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,42)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,o=n.getLCP,a=n.getTTFB;t(e),r(e),c(e),o(e),a(e)}))};u.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(x,{})}),document.getElementById("root")),v()}},[[41,1,2]]]);
//# sourceMappingURL=main.04ecc72f.chunk.js.map