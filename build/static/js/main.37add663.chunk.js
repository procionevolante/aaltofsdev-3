(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{22:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t(2),o=t.n(r),a=t(16),u=t.n(a),i=(t(22),t(6)),s=t(3),d=t(5),l=function(e){var n=e.person,t=e.deletePerson;return Object(c.jsxs)("div",{children:[n.name," ",n.number,Object(c.jsx)("button",{onClick:function(){window.confirm("Really delete ".concat(n.name,"?"))&&t(n.id)},children:"delete"})]})},j=function(e){var n=e.nameFilter,t=e.persons,r=e.deletePerson;return Object(c.jsx)(c.Fragment,{children:t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return Object(c.jsx)(l,{person:e,deletePerson:r},e.id)}))})},b=function(e){var n=e.msg;return null===n?null:Object(c.jsx)("div",{className:n.type,children:n.text})},f=function(e){var n=e.newPerson,t=e.handlePersonChange,r=e.addPerson;return Object(c.jsxs)("form",{onSubmit:r,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{name:"name",value:n.name,onChange:t})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{name:"number",value:n.number,onChange:t})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},h=t(4),m=t.n(h),p="http://localhost:3001/api",O={getAllPersons:function(){return m.a.get("".concat(p,"/persons")).then((function(e){return e.data}))},addPerson:function(e){return m.a.post("".concat(p,"/persons"),e).then((function(e){return e.data}))},updatePerson:function(e){return m.a.put("".concat(p,"/persons/").concat(e.id),e).then((function(e){return e.data}))},deletePerson:function(e){return m.a.delete("".concat(p,"/persons/").concat(e)).then((function(e){return e.data}))}},x=function(){var e=Object(r.useState)([]),n=Object(d.a)(e,2),t=n[0],o=n[1],a=Object(r.useState)(null),u=Object(d.a)(a,2),l=u[0],h=u[1],m=3e3,p=Object(r.useState)({name:"",number:""}),x=Object(d.a)(p,2),v=x[0],g=x[1],P=Object(r.useState)(""),w=Object(d.a)(P,2),y=w[0],C=w[1];Object(r.useEffect)((function(){O.getAllPersons().then((function(e){return o(e)}))}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(b,{msg:l}),Object(c.jsxs)("div",{children:["Filter by name: ",Object(c.jsx)("input",{value:y,onChange:function(e){C(e.target.value)}})]}),Object(c.jsx)("h2",{children:"Add a new"}),Object(c.jsx)(f,{newPerson:v,handlePersonChange:function(e){g(Object(s.a)(Object(s.a)({},v),{},Object(i.a)({},e.target.name,e.target.value)))},addPerson:function(e){if(e.preventDefault(),t.map((function(e){return e.name})).includes(v.name)&&window.confirm("".concat(v.name," is already added to the phonebook, replace old number with new one?"))){var n=t.find((function(e){return e.name===v.name}));O.updatePerson(Object(s.a)(Object(s.a)({},n),v)).then((function(e){o(t.map((function(t){return t.id===n.id?e:t}))),h({type:"success",text:"Updated ".concat(e.name)}),setTimeout((function(){return h(null)}),m)}))}else O.addPerson(v).then((function(e){o(t.concat(e)),h({type:"success",text:"Added ".concat(e.name)}),setTimeout((function(){return h(null)}),m)}))}}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(j,{deletePerson:function(e){O.deletePerson(e).then((function(n){return h({type:"success",text:"Deleted ".concat(t.find((function(n){return n.id===e})).name)})})).catch((function(n){return h({type:"error",text:"Information of '".concat(t.find((function(n){return n.id===e})).name,"' might have already been removed from the server")})})).finally((function(n){o(t.filter((function(n){return n.id!==e}))),setTimeout((function(){return h(null)}),m)}))},nameFilter:y,persons:t})]})},v=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,42)).then((function(n){var t=n.getCLS,c=n.getFID,r=n.getFCP,o=n.getLCP,a=n.getTTFB;t(e),c(e),r(e),o(e),a(e)}))};u.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(x,{})}),document.getElementById("root")),v()}},[[41,1,2]]]);
//# sourceMappingURL=main.37add663.chunk.js.map